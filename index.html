<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ourlittleforever</title>

  <!-- Fonts: old-money but clean (Google) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#07070a;
      --card:#0c0c10;
      --text:#f2f2f3;
      --muted:rgba(255,255,255,.55);
      --muted2:rgba(255,255,255,.35);
      --pink:#ff6fb2;
      --pink2:#ff8fc4;
      --outline:rgba(255,111,178,.35);
      --cream:#FCFAF7;  /* matches kiss.gif background */
      --brown:#2a1f18;  /* deep brown-black */
      --radius:28px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 900px at 70% -10%, rgba(255,111,178,.12), transparent 55%),
                  radial-gradient(900px 700px at 15% 110%, rgba(255,111,178,.10), transparent 60%),
                  var(--bg);
      color:var(--text);
      overflow:hidden;
    }

    /* ---------- floating outlined hearts (background watermark) ---------- */
    .wm-hearts{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
      opacity:.55;
      filter: blur(.15px);
    }
    .wm-heart{
      position:absolute;
      width:16px; height:16px;
      transform: rotate(45deg);
      border:2px solid rgba(255,111,178,.35);
      border-left:0; border-top:0;
      border-radius:3px;
      animation: floatUp linear infinite;
      opacity:.55;
    }
    .wm-heart::before,
    .wm-heart::after{
      content:"";
      position:absolute;
      width:16px; height:16px;
      border:2px solid rgba(255,111,178,.35);
      border-radius:50%;
      background:transparent;
    }
    .wm-heart::before{
      left:-10px; top:2px;
    }
    .wm-heart::after{
      left:2px; top:-10px;
    }
    @keyframes floatUp{
      from{ transform: translateY(20vh) rotate(45deg); opacity:.0; }
      15%{ opacity:.55; }
      to{ transform: translateY(-120vh) rotate(45deg); opacity:.0; }
    }

    /* ---------- stage / card ---------- */
    .stage{
      position:relative;
      z-index:1;
      height:100%;
      display:grid;
      place-items:center;
      padding: max(18px, env(safe-area-inset-top)) 18px max(18px, env(safe-area-inset-bottom));
    }

    .card{
      width:min(920px, 96vw);
      height:min(560px, 72vh);
      background: rgba(12,12,16,.86);
      border:1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: 0 20px 70px rgba(0,0,0,.55);
      overflow:hidden;
      position:relative;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      padding: 34px 24px 26px;
      backdrop-filter: blur(8px);
    }

    /* remove any top bars / corners - we simply don't render them */
    .center{ text-align:center; width:100%; }

    /* ---------- home (Apple-like, white) ---------- */
    .home{
      background: var(--cream);
      color: var(--brown);
      border:1px solid rgba(0,0,0,.06);
      backdrop-filter:none;
    }
    .home .big{
      font-family: Fraunces, serif;
      font-weight:700;
      letter-spacing:-.03em;
      font-size: clamp(34px, 5vw, 56px);
      line-height:1.05;
      margin: 10px 0 10px;
    }
    .home .big .pink{ color: var(--pink); }

    .home .small{
      font-family: Inter, system-ui;
      font-size: 14px;
      letter-spacing:.02em;
      color: var(--pink);
      opacity:.95;
      margin: 0 0 26px;
    }

    .home .startRow{
      display:flex;
      gap:16px;
      justify-content:center;
      align-items:center;
      margin-top: 6px;
      flex-wrap:wrap;
    }

    .btn{
      appearance:none;
      border:0;
      padding: 14px 22px;
      border-radius: 999px;
      font-weight:600;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn.primary{
      background: linear-gradient(135deg, #2a1f18, #1a1410);
      color: var(--cream);
      box-shadow: 0 12px 24px rgba(0,0,0,.18);
    }
    .btn.primary:active{ transform: translateY(1px); }

    /* GIF box on home */
    .startGif{
      width:64px; height:64px;
      border-radius:16px;
      overflow:hidden;
      background: var(--cream); /* match gif matte */
      display:grid;
      place-items:center;
    }
    .startGif img{
      width:64px; height:64px;
      display:block;
    }

    /* ---------- question screens (dark) ---------- */
    .qTopIcon{
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      height: 18px;
      margin-bottom: 10px;
    }
    .tinyHeart{
      width:16px; height:16px;
      transform: rotate(45deg);
      border:2px solid rgba(255,111,178,.8);
      border-left:0; border-top:0;
      border-radius:3px;
      position:relative;
      opacity:.9;
    }
    .tinyHeart::before,
    .tinyHeart::after{
      content:"";
      position:absolute;
      width:16px; height:16px;
      border:2px solid rgba(255,111,178,.8);
      border-radius:50%;
    }
    .tinyHeart::before{ left:-10px; top:2px; }
    .tinyHeart::after{ left:2px; top:-10px; }

    .qNum{
      color: rgba(255,255,255,.38);
      font-size:12px;
      letter-spacing:.18em;
      margin: 0 0 8px;
    }

    .title{
      font-family: Fraunces, serif;
      font-weight:700;
      letter-spacing:-.02em;
      font-size: clamp(28px, 4.2vw, 44px);
      line-height:1.12;
      margin: 0 0 8px;
    }

    .subtitle{
      color: var(--muted2);
      font-size: 13px;
      margin: 0 0 22px;
      letter-spacing:.02em;
    }

    .actions{
      display:flex;
      gap:14px;
      justify-content:center;
      align-items:center;
      position:relative;
      z-index:2;
      flex-wrap:wrap;
    }
    .pill{
      min-width: 170px;
      padding: 12px 18px;
      border-radius: 999px;
      background: rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.86);
      font-weight:700;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
    }
    .pill.yes{
      background: linear-gradient(135deg, rgba(255,111,178,1), rgba(255,143,196,1));
      border:0;
      color:#200b14;
      box-shadow: 0 18px 35px rgba(255,111,178,.18);
    }
    .pill:active{ transform: translateY(1px); }

    /* last question NO runner */
    .runner{
      position:absolute;
      left: 50%;
      transform: translateX( calc(-50% + 190px) ); /* starts next to YES */
      top: 0;
      z-index:3;
    }

    /* safe zone for runner (prevents overlapping text + prevents leaving card) */
    .safeZone{
      position:absolute;
      left: 22px;
      right: 22px;
      top: 56%;
      bottom: 70px;
      pointer-events:none;
      z-index:1;
    }

    /* are-you-sure line */
    .sureLine{
      height:18px;
      margin: 2px 0 8px;
      font-size: 12px;
      letter-spacing:.22em;
      color: rgba(255,255,255,.50);
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
      text-transform:uppercase;
    }
    .sureLine .angry{ filter:saturate(1.05); }

    /* progress dots */
    .dots{
      position:absolute;
      bottom: 18px;
      left:50%;
      transform:translateX(-50%);
      display:flex;
      gap:8px;
      opacity:.85;
    }
    .dot{
      width:6px; height:6px;
      border-radius:999px;
      background: rgba(255,255,255,.22);
    }
    .dot.on{ background: rgba(255,111,178,.9); width:18px; }

    /* ---------- success screen (cream) ---------- */
    .success{
      background: var(--cream);
      color: var(--brown);
      border:1px solid rgba(0,0,0,.06);
      backdrop-filter:none;
    }
    .success .title{
      color: var(--brown);
      font-family: Fraunces, serif;
      font-weight:700;
      font-size: clamp(34px, 4.6vw, 52px);
      margin-bottom: 10px;
    }
    .success .subtitle{
      color: rgba(42,31,24,.65);
      margin-bottom: 18px;
    }

    /* kiss box: remove white frame by matching bg + no border/padding */
    .kissBox{
      width: 280px;
      height: 280px;
      border-radius: 22px;
      overflow:hidden;
      background: var(--cream); /* same as gif matte */
      display:grid;
      place-items:center;
      box-shadow: 0 18px 40px rgba(0,0,0,.10);
      border: 0;
    }
    .kissBox img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display:block;
    }

    .finalTitle{
      margin-top: 18px;
      font-family: Fraunces, serif;
      font-weight:700;
      letter-spacing:-.02em;
      font-size: clamp(22px, 3.2vw, 34px);
      color: var(--brown);
    }

    /* ---------- confetti: slower, from bottom up (party popper vibe) ---------- */
    .confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:50;
      display:none;
    }
    .confetti.show{ display:block; }
    .confetti i{
      position:absolute;
      width: 10px;
      height: 16px;
      background: rgba(255,111,178,.95);
      border-radius: 2px;
      opacity:.95;
      animation: confettiUp 1.8s ease-out forwards; /* slower */
    }
    .confetti i.white{ background: rgba(255,255,255,.92); }
    @keyframes confettiUp{
      0%{
        transform: translateY(110vh) rotate(0deg);
        opacity:0;
      }
      10%{ opacity:1; }
      100%{
        transform: translateY(-10vh) rotate(360deg);
        opacity:0;
      }
    }

    /* ---------- responsive tweaks ---------- */
    @media (max-width: 520px){
      .card{
        height: min(620px, 78vh);
        padding: 28px 18px 24px;
      }
      .pill{ min-width: 150px; }
      .kissBox{ width: 240px; height: 240px; }
      .safeZone{ top: 58%; }
    }
  </style>
</head>

<body>
  <!-- watermark hearts -->
  <div class="wm-hearts" id="wmHearts"></div>

  <!-- confetti -->
  <div class="confetti" id="confetti"></div>

  <!-- audio (iOS will start only after a gesture; we start at Let's start) -->
  <audio id="bgm" src="bgm.mp3" preload="auto" loop></audio>
  <audio id="pop" src="pop.mp3" preload="auto"></audio>

  <div class="stage">
    <div class="card home" id="card">
      <!-- HOME -->
      <div class="center" id="home">
        <div class="big" aria-live="polite">
          <span id="helloWord">Hola</span>
          <span class="pink"> Kuo BaoPay</span>
        </div>
        <div class="small">a little hello</div>

        <div class="startRow">
          <button class="btn primary" id="startBtn">Letâ€™s start</button>
          <div class="startGif" aria-hidden="true">
            <img src="start.gif" alt="">
          </div>
        </div>
      </div>

      <!-- QUESTION -->
      <div class="center" id="question" style="display:none;">
        <div class="qTopIcon"><span class="tinyHeart" id="topIcon"></span></div>

        <div class="sureLine" id="sureLine" style="visibility:hidden;">
          <span>ARE YOU SURE?</span> <span class="angry">ðŸ˜¡</span>
        </div>

        <div class="qNum" id="qNum">01</div>
        <h1 class="title" id="qTitle">Do you like spending time with me?</h1>
        <p class="subtitle" id="qSub">be honestâ€¦</p>

        <div class="actions" id="actions">
          <button class="pill yes" id="yesBtn">YES â™¡</button>
          <button class="pill" id="noBtn">ABSOLUTELY</button>
        </div>

        <!-- runner safe zone only used on final question -->
        <div class="safeZone" id="safeZone" style="display:none;"></div>

        <div class="dots" id="dots">
          <span class="dot on"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
      </div>

      <!-- SUCCESS -->
      <div class="center" id="success" style="display:none;">
        <div class="qTopIcon"><span class="tinyHeart"></span></div>
        <h1 class="title">Yaaay!</h1>
        <p class="subtitle">I knew youâ€™d say yes.<br/>You just made me the happiest person in the world.</p>

        <div class="kissBox">
          <img src="kiss.gif" alt="kiss gif">
        </div>

        <div class="finalTitle">Happy Valentineâ€™s and 18th</div>
        <div class="dots" style="position:static; transform:none; margin-top:14px;">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot on"></span>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ---------- floating watermark hearts ---------- */
    (function makeWMHearts(){
      const wrap = document.getElementById('wmHearts');
      const count = 22;
      for(let i=0;i<count;i++){
        const h = document.createElement('div');
        h.className = 'wm-heart';
        const left = Math.random()*100;
        const size = 10 + Math.random()*18;
        const dur  = 10 + Math.random()*14;
        const delay= Math.random()*8;
        const op   = 0.25 + Math.random()*0.35;
        h.style.left = left + 'vw';
        h.style.bottom = (-10 - Math.random()*40) + 'vh';
        h.style.width = size + 'px';
        h.style.height = size + 'px';
        h.style.opacity = op;
        h.style.animationDuration = dur + 's';
        h.style.animationDelay = delay + 's';
        wrap.appendChild(h);
      }
    })();

    /* ---------- hello carousel (home) ---------- */
    const helloWord = document.getElementById('helloWord');
    const hellos = ["Hola", "Bonjour", "ä½ å¥½", "ã“ã‚“ã«ã¡ã¯", "å“ˆå›‰"];
    let hi = 0;
    setInterval(() => {
      hi = (hi + 1) % hellos.length;
      helloWord.textContent = hellos[hi];
    }, 1200);

    /* ---------- screens ---------- */
    const card = document.getElementById('card');
    const home = document.getElementById('home');
    const q = document.getElementById('question');
    const s = document.getElementById('success');

    const qNum = document.getElementById('qNum');
    const qTitle = document.getElementById('qTitle');
    const qSub = document.getElementById('qSub');
    const dots = document.getElementById('dots').children;

    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const sureLine = document.getElementById('sureLine');
    const safeZone = document.getElementById('safeZone');

    const bgm = document.getElementById('bgm');
    const pop = document.getElementById('pop');
    const confetti = document.getElementById('confetti');

    const questions = [
      { num:"01", title:"Do you like spending time with me?", sub:"be honestâ€¦", yes:"YES â™¡", no:"ABSOLUTELY" },
      { num:"02", title:"Do you think about me when weâ€™re apart?", sub:"even a little?", yes:"YES â™¡", no:"ABSOLUTELY" },
      { num:"03", title:"Do you smile when you see my name on your phone?", sub:"because I smile when I see yoursâ€¦", yes:"YES â™¡", no:"ABSOLUTELY" },
      { num:"04", title:"Will you be my Valentine?", sub:"iâ€™ve been waiting to ask you thisâ€¦", yes:"YES, Iâ€™D LOVE TO â™¡", no:"NO" }
    ];
    let idx = 0;

    function setDots(i){
      for(let d=0; d<4; d++){
        dots[d].classList.toggle('on', d===i);
      }
    }

    function showQuestion(i){
      const data = questions[i];
      qNum.textContent = data.num;
      qTitle.textContent = data.title;
      qSub.textContent = data.sub;
      yesBtn.textContent = data.yes;
      noBtn.textContent  = data.no;

      setDots(i);

      // default states
      sureLine.style.visibility = 'hidden';

      // final question setup
      if(i === 3){
        safeZone.style.display = 'block';
        noBtn.classList.add('runner');
        // reset runner start position (next to YES)
        noBtn.style.position = 'absolute';
        noBtn.style.left = '50%';
        noBtn.style.top  = '0px';
        noBtn.style.transform = 'translateX(calc(-50% + 190px))';
        noBtn.dataset.armed = "0";     // becomes 1 after first NO tap
        noBtn.dataset.sure = "0";      // are you sure latch
      }else{
        safeZone.style.display = 'none';
        noBtn.classList.remove('runner');
        noBtn.style.position = 'static';
        noBtn.style.left = '';
        noBtn.style.top  = '';
        noBtn.style.transform = '';
        noBtn.dataset.armed = "0";
        noBtn.dataset.sure = "0";
      }
    }

    function goToQuestions(){
      // start bgm after gesture
      try{
        bgm.volume = 0.55;
        bgm.play().catch(()=>{ /* iOS may still block; user can unmute from browser */ });
      }catch(e){}

      home.style.display = 'none';
      card.classList.remove('home');
      card.classList.add('card'); // no-op, keeps class order
      q.style.display = 'block';
      s.style.display = 'none';
      // ensure dark look
      card.style.background = 'rgba(12,12,16,.86)';
      card.style.color = 'var(--text)';
      showQuestion(0);
      idx = 0;
    }

    function toSuccess(){
      q.style.display = 'none';
      s.style.display = 'block';

      // switch card to cream success style
      card.classList.add('success');
      card.classList.remove('home');
      card.style.background = 'var(--cream)';
      card.style.color = 'var(--brown)';

      // pop sound
      try{
        pop.currentTime = 0;
        pop.volume = 0.9;
        pop.play().catch(()=>{});
      }catch(e){}

      partyPopper();
    }

    /* confetti from bottom up */
    function partyPopper(){
      confetti.innerHTML = '';
      confetti.classList.add('show');

      const pieces = 90;
      for(let i=0;i<pieces;i++){
        const p = document.createElement('i');
        if(Math.random() < 0.45) p.classList.add('white');

        const x = Math.random()*100;
        const delay = Math.random()*0.35; // slight spread
        const rotate = (Math.random()*140 - 70);

        p.style.left = x + 'vw';
        p.style.bottom = '-10vh';
        p.style.animationDelay = delay + 's';
        p.style.transform = `translateY(110vh) rotate(${rotate}deg)`;

        confetti.appendChild(p);
      }

      // fade out later
      setTimeout(()=>{
        confetti.classList.remove('show');
        confetti.innerHTML = '';
      }, 2200);
    }

    /* ---------- NO runner logic (final question) ---------- */
    function moveNoInsideSafeZone(){
      const zone = safeZone.getBoundingClientRect();
      const btn = noBtn.getBoundingClientRect();

      // compute safe bounds so button stays fully inside safeZone
      const pad = 6;
      const minX = zone.left + pad;
      const maxX = zone.right - btn.width - pad;
      const minY = zone.top + pad;
      const maxY = zone.bottom - btn.height - pad;

      const x = Math.max(minX, Math.min(maxX, minX + Math.random()*(maxX - minX)));
      const y = Math.max(minY, Math.min(maxY, minY + Math.random()*(maxY - minY)));

      // place relative to card
      const cardRect = card.getBoundingClientRect();
      const relX = x - cardRect.left;
      const relY = y - cardRect.top;

      noBtn.style.left = relX + 'px';
      noBtn.style.top  = relY + 'px';
      noBtn.style.transform = 'translateX(0)';
    }

    /* ---------- Events ---------- */
    document.getElementById('startBtn').addEventListener('click', goToQuestions);

    // YES always advances; final YES goes to success
    yesBtn.addEventListener('click', () => {
      if(idx < 3){
        idx += 1;
        showQuestion(idx);
      }else{
        // final YES
        // when YES is pressed, clear sure latch & show heart icon again (by hiding sureLine)
        sureLine.style.visibility = 'hidden';
        toSuccess();
      }
    });

    // NO: on Q1-3 behaves like "ABSOLUTELY" (advance)
    noBtn.addEventListener('click', (e) => {
      // prevent any accidental navigation on mobile
      e.preventDefault();
      e.stopPropagation();

      if(idx < 3){
        // treat as positive: go next
        idx += 1;
        showQuestion(idx);
        return;
      }

      // final question behavior
      // latch "ARE YOU SURE? ðŸ˜¡" until YES
      sureLine.style.visibility = 'visible';
      noBtn.dataset.sure = "1";

      // arm the runner on first NO tap
      if(noBtn.dataset.armed === "0"){
        noBtn.dataset.armed = "1";
        // first tap just starts running + move once
        moveNoInsideSafeZone();
        return;
      }

      // after armed: every tap relocates (always stays visible)
      moveNoInsideSafeZone();
    });

    // also make it dodge when user tries to hover/touch near it (helps on desktop)
    noBtn.addEventListener('pointerenter', () => {
      if(idx === 3 && noBtn.dataset.armed === "1"){
        moveNoInsideSafeZone();
      }
    });

    // Initial view
    // keep card in home style
    card.classList.add('home');
  </script>
</body>
</html>
